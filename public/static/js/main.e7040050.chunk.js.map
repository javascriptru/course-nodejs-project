{"version":3,"sources":["serviceWorker.js","store/modules/auth/constants.js","store/modules/auth/reducer.js","store/modules/categories/constants.js","store/modules/categories/reducer.js","store/modules/chat/constants.js","store/modules/chat/reducer.js","store/modules/orders/constants.js","store/modules/orders/reducer.js","store/modules/products/constants.js","store/modules/products/reducer.js","store/index.js","components/Modal/ModalBtnBack.js","components/Modal/ModalBtnClose.js","components/Modal/Modal.js","components/Chat/ChatMessage.js","components/Chat/ChatInner.js","network.js","store/modules/chat/actions.js","store/modules/auth/actions.js","components/Chat/Chat.js","components/ModalContextMenu.js","store/modules/helpers/useModal.js","components/ModalMenu/ModalAsItem.js","components/ModalMenu/ModalMenu.js","store/modules/categories/actions.js","components/Header.js","components/Footer.js","components/Dropdown.js","components/ListGroupMenu.js","components/HomeCarousel.js","utils/getNoun.js","components/Card.js","components/Recommendations.js","components/Loader.js","store/modules/products/actions.js","components/Home.js","components/Form.js","components/Login.js","components/OAuthCallback.js","components/Register.js","components/Confirm.js","components/CategoriesSideBar.js","components/Category.js","components/Search.js","components/Product/ProductCarouselIndicators.js","components/Product/ProductCarousel.js","components/Product/Product.js","components/Checkout.js","store/modules/orders/actions.js","index.js","components/Application.js"],"names":["Boolean","window","location","hostname","match","initialState","token","localStorage","getItem","login","error","processing","registration","errors","complete","confirmation","oauth","oauthCallback","me","fetching","profile","items","isLoading","isWebsocketConnected","messages","draft","recommendations","byCategory","byQuery","byId","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","combineReducers","auth","state","action","type","setItem","Object","keys","map","key","categories","chat","concat","message","orders","data","order","products","category","query","id","product","applyMiddleware","thunkMiddleware","ModalBtnBack","handleToggleModal","Button","color","className","onClick","aria-label","src","alt","Modal","title","content","isBackBtn","isCloseBtn","isOpen","rest","toggle","ModalHeader","ModalBtnClose","ChatMessage","income","outcome","date","from","cx","d","Date","getHours","toString","padStart","getMinutes","formatDate","ChatInner","sendMessage","useState","msg","setMsg","user","text","Form","onSubmit","e","preventDefault","Input","value","onChange","target","axios","create","baseURL","validateStatus","status","removeItem","reload","fetchMessages","dispatch","getState","client","get","headers","Authorization","then","response","catch","fetchMe","socket","connect","bindActionCreators","props","isCollapsed","isFixed","setIsOpen","_sendMessage","emit","now","useEffect","options","transportOptions","polling","extraHeaders","io","on","Collapse","ModalContextMenu","item","to","useModal","ModalAsItem","context","isChat","passedModalData","useContext","modalComponent","OpeningModalContext","React","createContext","ModalProvider","Provider","withRouter","history","setQuery","Fragment","inline","FormGroup","style","marginBottom","name","placeholder","event","length","push","subcategories","subcategory","slug","fetchCategories","mapDispatchToProps","values","queryString","parse","search","isOpenMenu","pathname","Navbar","light","expand","Row","Col","lg","NavbarToggler","navbar","Nav","NavItem","outline","href","Footer","ListGroupMenuDropdown","dropdownTitle","dropdownItems","useHistory","setToggleState","Dropdown","DropdownToggle","caret","tag","DropdownMenu","DropdownItem","url","ListGroupMenu","ListGroup","ListGroupItem","captionTitle","captionBtnText","captionBtnIconSrc","HomeCarousel","Component","constructor","super","this","activeIndex","next","bind","previous","goToIndex","onExiting","onExited","animating","nextIndex","setState","newIndex","render","slides","reduce","result","s","find","CarouselItem","role","Carousel","CarouselIndicators","onClickHandler","CarouselControl","direction","directionText","getNounReviews","number","n","Math","abs","formatter","Intl","NumberFormat","currency","CardComponent","cardTitle","cardImgSrc","rating","reviews","cardPrice","discount","Card","Link","CardImg","width","CardBody","CardTitle","Array","fill","el","i","CardText","format","Recommendations","CardDeck","images","price","Loader","fetchProductById","fetchRecommendations","oauthAction","provider","changeState","getOAuthLink","setValue","fields","field","htmlFor","label","required","disabled","submitButton","loginAction","email","password","post","providerMap","vkontakte","fb","github","OAuthCallback","params","URLSearchParams","componentDidMount","oauthCallbackAction","code","registerAction","displayName","validated","confirmAction","verificationToken","CategoriesSideBar","categoryId","subcategoryId","selectedCategoryId","selectCategoryId","fetchProductsByCategory","selectedSubcategory","setSelectedSubcategory","console","log","fetchProductsByQuery","mapToCssModules","cssModule","split","c","join","listClasses","indicators","idx","indicatorClasses","active","ProductCarousel","altText","activeTab","setActiveTab","tab","details","detail","tabs","NavLink","classnames","TabContent","TabPane","tabId","sm","description","slice","j","review","author","checkout","replace","phone","setPhone","address","setAddress","Alert","Label","for","size","ReactDOM","store","children","exact","path","component","Home","Login","Register","Confirm","Category","Search","Product","Checkout","document","getElementById","navigator","serviceWorker","ready","unregister"],"mappings":"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","file":"static/js/main.e7040050.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const LoginRequest = 'LoginRequest';\nexport const LoginFailure = 'LoginFailure';\nexport const LoginSuccess = 'LoginSuccess';\n\nexport const RegisterRequest = 'RegisterRequest';\nexport const RegisterFailure = 'RegisterFailure';\nexport const RegisterSuccess = 'RegisterSuccess';\n\nexport const ConfirmRequest = 'ConfirmRequest';\nexport const ConfirmFailure = 'ConfirmFailure';\nexport const ConfirmSuccess = 'ConfirmSuccess';\n\nexport const OAuthRequest = 'OAuthRequest';\nexport const OAuthFailure = 'OAuthFailure';\n\nexport const OAuthCallbackRequest = 'OAuthCallbackRequest';\nexport const OAuthCallbackFailure = 'OAuthCallbackFailure';\nexport const OAuthCallbackSuccess = 'OAuthCallbackSuccess';\n\nexport const FetchMeRequest = 'FetchMeRequest';\nexport const FetchMeSuccess = 'FetchMeSuccess';\nexport const FetchMeFailure = 'FetchMeFailure';\n","import {\n  LoginRequest, LoginSuccess, LoginFailure,\n  RegisterRequest, RegisterSuccess, RegisterFailure,\n  ConfirmRequest, ConfirmSuccess, ConfirmFailure,\n  OAuthRequest, OAuthFailure,\n  OAuthCallbackRequest, OAuthCallbackSuccess, OAuthCallbackFailure, FetchMeRequest, FetchMeSuccess,\n} from './constants';\n\nconst token = localStorage.getItem('token') || null;\n\nconst initialState = {\n  token,\n  login: {\n    error: null,\n    processing: false,\n  },\n  registration: {\n    errors: null,\n    processing: false,\n    complete: false,\n  },\n  confirmation: {\n    error: null,\n    processing: false,\n  },\n  oauth: {\n    error: null,\n    processing: false,\n  },\n  oauthCallback: {\n    error: null,\n    processing: false,\n  },\n  me: {\n    fetching: false,\n    profile: null,\n  }\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case LoginRequest:\n      return {\n        ...state,\n        login: {...initialState.login, processing: true}\n      };\n    case LoginSuccess:\n      localStorage.setItem('token', action.token);\n      return {\n        ...state,\n        login: initialState.login,\n        token: action.token\n      };\n    case LoginFailure:\n      return {\n        ...state,\n        login: {...initialState.login, error: action.error, processing: false}\n      };\n    case RegisterRequest:\n      return {\n        ...state,\n        registration: {...initialState.registration, processing: true}\n      };\n    case RegisterSuccess:\n      return {\n        ...state,\n        registration: {...initialState.registration, processing: false, complete: true,}\n      };\n    case RegisterFailure:\n      return {\n        ...state,\n        registration: {\n          ...initialState.registration,\n          errors: Object.keys(action.errors).map(key => action.errors[key]),\n          processing: false\n        }\n      };\n    case ConfirmRequest:\n      return {\n        ...state,\n        confirmation: {...initialState.confirmation, processing: true}\n      };\n    case ConfirmSuccess:\n      localStorage.setItem('token', action.token);\n      return {...state, confirmation: initialState.confirmation, token: action.token};\n    case ConfirmFailure:\n      return {\n        ...state,\n        confirmation: {...initialState.confirmation, error: action.error, processing: false}\n      };\n    case OAuthRequest:\n      return {\n        ...state,\n        oauth: {...initialState.oauth, processing: true}\n      };\n    case OAuthFailure:\n      return {\n        ...state, oauth: {...initialState.oauth, error: action.error, processing: false}\n      };\n    case OAuthCallbackRequest:\n      return {\n        ...state,\n        oauthCallback: {...initialState.oauthCallback, processing: true}\n      };\n    case OAuthCallbackFailure:\n      return {\n        ...state,\n        oauthCallback: {...initialState.oauthCallback, error: action.error, processing: false}\n      };\n    case OAuthCallbackSuccess:\n      localStorage.setItem('token', action.token);\n      return {...state, oauthCallback: initialState.oauthCallback, token: action.token};\n    case FetchMeRequest:\n      return {...state, me: { ...initialState.me, fetching: true }};\n    case FetchMeSuccess:\n      return {...state, me: { ...initialState.me, profile: action.profile }};\n    default:\n      return state;\n  }\n}\n","export const FetchCategoriesRequest = 'FetchCategoriesRequest';\nexport const FetchCategoriesSuccess = 'FetchCategoriesSuccess';\nexport const FetchCategoriesFailure = 'FetchCategoriesFailure';\n","import {\n  FetchCategoriesRequest,\n  FetchCategoriesSuccess\n} from './constants';\n\nconst initialState = {\n  items: [],\n  isLoading: false,\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case FetchCategoriesRequest:\n      return {\n        isLoading: true,\n        items: [],\n      };\n    case FetchCategoriesSuccess:\n      return {\n        isLoading: false,\n        items: action.categories,\n      };\n    default:\n      return state;\n  }\n}\n","export const WebsocketConnected = 'WebsocketConnected';\nexport const WebsocketDisconnected = 'WebsocketDisconnected';\nexport const Message = 'Message';\n\nexport const FetchMessagesRequest = 'FetchMessagesRequest';\nexport const FetchMessagesSuccess = 'FetchMessagesSuccess';\nexport const FetchMessagesFailure = 'FetchMessagesFailure';\n","import {\n  FetchMessagesSuccess,\n  WebsocketConnected, WebsocketDisconnected,\n  Message,\n} from './constants';\n\nconst initialState = {\n  isWebsocketConnected: false,\n  messages: [],\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case FetchMessagesSuccess:\n      return {\n        ...state,\n        messages: action.messages.concat(state.messages),\n      };\n    case WebsocketConnected:\n      return { ...state, isWebsocketConnected: true };\n    case WebsocketDisconnected:\n      return { ...state, isWebsocketConnected: false };\n    case Message:\n      return {\n        ...state,\n        messages: state.messages.concat(action.message),\n      };\n    default:\n      return state;\n  }\n}\n","export const CheckoutRequest = 'CheckoutRequest';\nexport const CheckoutSuccess = 'CheckoutSuccess';\nexport const CheckoutFailure = 'CheckoutFailure';\n","import {CheckoutRequest, CheckoutSuccess, CheckoutFailure} from \"./constants\";\n\nconst initialState = {\n  draft: {\n    fetching: false,\n    errors: null,\n  },\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case CheckoutRequest:\n      return {\n        ...state,\n        draft: {\n          fetching: true,\n          error: null,\n          ...action.data,\n        }\n      };\n    case CheckoutSuccess:\n      return {\n        ...state,\n        draft: {\n          fetching: false,\n          error: null,\n        },\n        [action.order]: action.data,\n      };\n    case CheckoutFailure:\n      return {\n        ...state,\n        draft: {\n          ...state.draft,\n          fetching: false,\n          errors: action.errors,\n        }\n      };\n    default:\n      return state;\n  }\n}\n","export const FetchRecommendationsRequest = 'FetchRecommendationsRequest';\nexport const FetchRecommendationsSuccess = 'FetchRecommendationsSuccess';\nexport const FetchRecommendationsFailure = 'FetchRecommendationsFailure';\n\nexport const FetchProductsByCategoryRequest = 'FetchProductsByCategoryRequest';\nexport const FetchProductsByCategorySuccess = 'FetchProductsByCategorySuccess';\nexport const FetchProductsByCategoryFailure = 'FetchProductsByCategoryFailure';\n\nexport const FetchProductsByQueryRequest = 'FetchProductsByQueryRequest';\nexport const FetchProductsByQuerySuccess = 'FetchProductsByQuerySuccess';\nexport const FetchProductsByQueryFailure = 'FetchProductsByQueryFailure';\n\nexport const FetchProductByIdRequest = 'FetchProductByIdRequest';\nexport const FetchProductByIdSuccess = 'FetchProductByIdSuccess';\nexport const FetchProductByIdFailure = 'FetchProductByIdFailure';\n","import {\n  FetchRecommendationsSuccess,\n  FetchProductsByCategorySuccess,\n  FetchProductsByQueryRequest,\n  FetchProductsByQuerySuccess,\n  FetchProductByIdRequest,\n  FetchProductByIdSuccess,\n} from './constants';\n\nconst initialState = {\n  recommendations: [],\n  byCategory: {},\n  byQuery: {},\n  byId: {}\n};\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case FetchRecommendationsSuccess:\n      return { ...state, recommendations: action.recommendations, };\n    case FetchProductsByCategorySuccess:\n      return {\n        ...state,\n        byCategory: {\n          ...state.byCategory,\n          [action.category]: action.products,\n        }\n      };\n    case FetchProductsByQueryRequest:\n      return {\n        ...state,\n        byQuery: {\n          ...state.byQuery,\n          [action.query]: {\n            fetching: true,\n            products: []\n          }\n        }\n      };\n    case FetchProductsByQuerySuccess:\n      return {\n        ...state,\n        byQuery: {\n          ...state.byQuery,\n          [action.query]: {\n            fetching: false,\n            products: action.products,\n          }\n        }\n      };\n    case FetchProductByIdRequest:\n      return {\n        ...state,\n        byId: {\n          ...state.byId,\n          [action.id]: {\n            fetching: true,\n            product: null\n          }\n        }\n      };\n    case FetchProductByIdSuccess:\n      return {\n        ...state,\n        byId: {\n          ...state.byId,\n          [action.id]: {\n            fetching: false,\n            product: action.product\n          }\n        }\n      };\n    default:\n      return state;\n  }\n}\n","import { createStore, applyMiddleware, combineReducers, compose } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\n\nimport authReducer from './modules/auth/reducer';\nimport categoriesReducer from './modules/categories/reducer';\nimport chatReducer from './modules/chat/reducer';\nimport ordersReducer from './modules/orders/reducer';\nimport productsReducer from './modules/products/reducer';\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nexport default createStore(\n  combineReducers({\n    auth: authReducer,\n    categories: categoriesReducer,\n    chat: chatReducer,\n    orders: ordersReducer,\n    products: productsReducer,\n  }),\n  composeEnhancers(applyMiddleware(thunkMiddleware)),\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button} from 'reactstrap';\n\nconst ModalBtnBack = ({handleToggleModal}) => (\n  <Button\n    color=\"link\"\n    className=\"arrow-back px-2 py-2\"\n    onClick={handleToggleModal}\n    aria-label=\"back\"\n  >\n    <img src=\"/assets/icons/icon-arrow.svg\" alt=\"back\"/>\n  </Button>\n);\n\nModalBtnBack.propTypes = {\n  handleToggleModal: PropTypes.func.isRequired\n};\n\nexport default ModalBtnBack;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Button} from 'reactstrap';\n\nconst ModalBtnBack = ({handleToggleModal}) => (\n  <Button\n    color=\"link\"\n    className=\"btn-close float-none px-2 py-2\"\n    onClick={handleToggleModal}\n    aria-label=\"close\"\n  >\n    <img src=\"/assets/icons/icon-close.svg\" alt=\"close\"/>\n  </Button>\n);\n\nModalBtnBack.propTypes = {\n  handleToggleModal: PropTypes.func.isRequired\n};\n\nexport default ModalBtnBack;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Modal as ReactstrapModal, ModalHeader} from 'reactstrap';\nimport ModalBtnBack from './ModalBtnBack';\nimport ModalBtnClose from './ModalBtnClose';\n\nconst Modal = ({title, content, isBackBtn, isCloseBtn, isOpen, handleToggleModal, ...rest}) => (\n  <ReactstrapModal\n    title={title}\n    isOpen={isOpen}\n    toggle={handleToggleModal}\n    content={content}\n    {...rest}\n  >\n    <ModalHeader>\n      {title}\n      {isBackBtn && (<ModalBtnBack handleToggleModal={handleToggleModal} />)}\n      {isCloseBtn && (<ModalBtnClose handleToggleModal={handleToggleModal} />)}\n    </ModalHeader>\n    {content}\n  </ReactstrapModal>\n);\n\nModal.propTypes = {\n  title: PropTypes.string,\n  isBackBtn: PropTypes.bool,\n  isCloseBtn: PropTypes.bool,\n  content: PropTypes.element.isRequired,\n  isOpen: PropTypes.bool.isRequired,\n  handleToggleModal: PropTypes.func.isRequired\n};\n\nexport default Modal;\n","import React from 'react';\n// import PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nconst ChatMessage = ({income, outcome, date, from, message}) => (\n  <div className={cx(\"chat__message\", {'-income': income, '-outcome': outcome})}>\n    <div className=\"chat__message--date\">{from} @ {formatDate(date)}</div>\n    <div className=\"chat__message--inner\">\n      {message}\n    </div>\n  </div>\n);\n\nfunction formatDate(date) {\n  const d = new Date(date);\n  return `${d.getHours().toString().padStart(2, '0')}:${d.getMinutes().toString().padStart(2, '0')}`;\n}\n\n\nChatMessage.propTypes = {\n  // message: PropTypes.string.isRequired\n};\n\nexport default ChatMessage;\n","import React, {useEffect, useState} from 'react';\nimport {Button, Form, Input} from 'reactstrap';\nimport ChatMessage from './ChatMessage';\n// import Loader from '../Loader';\n// import {fetchMessages} from \"../../store/modules/chat/actions\";\n// import {connect} from \"react-redux\";\n\nconst ChatInner = ({isWebsocketConnected, messages, sendMessage}) => {\n  // useEffect(() => {\n  //   fetchMessages();\n  // }, []);\n  //\n  // if (!messages.length) {\n  //   return <Loader />;\n  // }\n  \n  const [msg, setMsg] = useState('');\n  \n  function onSubmit(e) {\n    e.preventDefault();\n    if (isWebsocketConnected) {\n      sendMessage(msg);\n      setMsg('');\n    }\n  }\n\n  return (\n    <div className=\"chat__inner\">\n      <div className=\"chat__body\">\n        {messages.map(message => {\n          return (\n            <ChatMessage\n              key={message.id}\n              income\n              date={message.date}\n              from={message.user}\n              message={message.text} />\n          );\n        })}\n      </div>\n      <div className=\"chat__footer\">\n        <Form onSubmit={onSubmit} className=\"form-inline form-inline-flex\">\n          <Input value={msg} onChange={e => setMsg(e.target.value)} className=\"form-control mr-2\" type=\"text\" />\n          <Button type=\"submit\" color=\"link\" className=\"btn btn-send\">\n            <img src=\"/assets/icons/icon-send.svg\" alt=\"\" />\n          </Button>\n        </Form>\n      </div>\n    </div>\n  )\n};\n\n// function mapStateToProps(state) {\n//   return { messages: state.messages };\n// }\n//\n// const mapDispatchToProps = { fetchMessages };\n//\n// export default connect(mapStateToProps, mapDispatchToProps)(ChatInner);\n\nexport default ChatInner;\n","import axios from 'axios';\n\nexport default axios.create({\n  baseURL: process.env.NODE_ENV === 'development' ? 'http://localhost:3000' : '',\n  validateStatus: status => {\n    if (status === 401) {\n      localStorage.removeItem('token');\n      window.location.reload();\n      return;\n    }\n    return status <= 399;\n  }\n});\n","import client from '../../../network';\nimport {Message} from './constants';\n\nimport {\n  FetchMessagesRequest, FetchMessagesSuccess, FetchMessagesFailure,\n} from './constants';\n\nexport function fetchMessages() {\n  return (dispatch, getState) => {\n    dispatch({type: FetchMessagesRequest});\n    \n    const state = getState();\n    const token = state.auth.token;\n    \n    client.get('/api/messages', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      dispatch({type: FetchMessagesSuccess, messages: response.data.messages});\n    }).catch(error => {\n      dispatch({type: FetchMessagesFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function sendMessage(message) {\n  return { type: Message, message };\n}\n","import client from '../../../network';\n\nimport {\n  LoginRequest, LoginSuccess, LoginFailure,\n  RegisterRequest, RegisterSuccess, RegisterFailure,\n  ConfirmRequest, ConfirmSuccess, ConfirmFailure,\n  OAuthRequest, OAuthFailure,\n  OAuthCallbackRequest, OAuthCallbackSuccess, OAuthCallbackFailure,\n  FetchMeRequest, FetchMeSuccess, FetchMeFailure,\n} from './constants';\n\nexport function login({email, password}) {\n  return (dispatch, getState) => {\n    dispatch({type: LoginRequest});\n    \n    client.post('/api/login', {\n      email, password\n    }).then(response => {\n      dispatch({type: LoginSuccess, token: response.data.token});\n    }).catch(error => {\n      dispatch({type: LoginFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function register({email, displayName, password}) {\n  return (dispatch, getState) => {\n    dispatch({type: RegisterRequest});\n    \n    client.post('/api/register', {\n      email, displayName, password\n    }).then(response => {\n      dispatch({type: RegisterSuccess});\n    }).catch(error => {\n      dispatch({type: RegisterFailure, errors: error.response.data.errors});\n    });\n  }\n}\n\nexport function confirm({verificationToken}) {\n  return (dispatch, getState) => {\n    dispatch({type: ConfirmRequest});\n    \n    client.post('/api/confirm', {\n      verificationToken\n    }).then(response => {\n      dispatch({type: ConfirmSuccess, token: response.data.token});\n    }).catch(error => {\n      dispatch({type: ConfirmFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function oauth({provider}) {\n  return (dispatch, getState) => {\n    dispatch({type: OAuthRequest});\n    \n    client.get(`/api/oauth/${provider}`)\n      .then(response => {\n        window.location.href = response.data.location;\n      })\n      .catch(error => {\n        dispatch({type: OAuthFailure, error: error.response.data.error});\n      });\n  }\n}\n\nexport function oauthCallback({provider, code}) {\n  return (dispatch, getState) => {\n    dispatch({type: OAuthCallbackRequest});\n    \n    client.post('/api/oauth_callback', {\n      provider\n    }, {\n      params: { code }\n    }).then(response => {\n      dispatch({type: OAuthCallbackSuccess, token: response.data.token});\n    }).catch(error => {\n      dispatch({type: OAuthCallbackFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function fetchMe() {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (state.auth.me.fetching || !!state.auth.me.profile) return;\n    \n    dispatch({type: FetchMeRequest});\n    \n    const token = state.auth.token;\n    \n    client.get('/api/me', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    }).then(response => {\n      dispatch({type: FetchMeSuccess, profile: response.data});\n    }).catch(error => {\n      dispatch({type: FetchMeFailure, error: error.response.data.error});\n    });\n  }\n}\n","import React, {useState, useEffect} from 'react';\nimport get from 'lodash/get';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport {Collapse} from 'reactstrap';\nimport cx from 'classnames';\nimport ChatInner from './ChatInner';\nimport io from 'socket.io-client';\nimport {bindActionCreators} from 'redux';\nimport {WebsocketConnected, WebsocketDisconnected, Message} from '../../store/modules/chat/constants';\nimport {fetchMessages, sendMessage} from '../../store/modules/chat/actions';\nimport {fetchMe} from '../../store/modules/auth/actions';\n\nlet socket = null;\n\nfunction Chat(props) {\n  const {\n    token, isWebsocketConnected, messages, me, isCollapsed, isFixed,\n    dispatch, fetchMessages, sendMessage, fetchMe,\n  } = props;\n  const [isOpen, setIsOpen] = useState(false);\n  \n  useEffect(() => {\n    if (!token) return;\n\n    fetchMe();\n    fetchMessages();\n  }, [token]);\n\n  useEffect(() => {\n    if (process.env.NODE_ENV === 'development') return;\n    \n    const options = token\n      ? {\n        transportOptions: {\n          polling: {\n            extraHeaders: {\n              Authorization: `Bearer ${token}`\n            }\n          }\n        }\n      }\n      : {};\n\n    socket = io('', options);\n\n    socket.on('connect', () => {\n      dispatch({type: WebsocketConnected});\n    });\n\n    socket.on('disconnect', () => {\n      dispatch({type: WebsocketDisconnected});\n    });\n\n    socket.on('message', message => {\n      dispatch({type: Message, message});\n    });\n  }, [token]);\n\n  function handleToggleCollapse() {\n    setIsOpen(!isOpen);\n  }\n\n  function _sendMessage(msg) {\n    socket.emit('message', { text: msg, date: Date.now() });\n    sendMessage({\n      text: msg,\n      user: get(me, 'profile.displayName', ''),\n      date: Date.now(),\n      id: Date.now(),\n    });\n  }\n\n  return (\n    <div className={cx(\"chat\", {\"fixed\": isFixed})}>\n      {isCollapsed && (\n        <div className=\"chat__header\" onClick={handleToggleCollapse}>\n           ?\n          <img src=\"/assets/icons/icon-chat-white.svg\" alt=\"icon-chat\" />\n        </div>\n      )}\n      {isCollapsed\n        ? <Collapse isOpen={isOpen}>\n          <ChatInner\n            isWebsocketConnected={isWebsocketConnected}\n            sendMessage={_sendMessage}\n            messages={messages} />\n        </Collapse>\n        : <ChatInner\n          isWebsocketConnected={isWebsocketConnected}\n          sendMessage={_sendMessage}\n          messages={messages} />\n      }\n    </div>\n  );\n}\n\nChat.propTypes = {\n  isCollapsed: PropTypes.bool,\n  isFixed: PropTypes.bool\n};\n\nfunction mapStateToProps(state) {\n  return {\n    token: state.auth.token,\n    me: state.auth.me,\n    isWebsocketConnected: state.chat.isWebsocketConnected,\n    messages: state.chat.messages,\n  };\n}\n\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    dispatch,\n    ...bindActionCreators({fetchMessages, sendMessage, fetchMe}, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Chat);\n","import React from \"react\";\nimport {Link} from 'react-router-dom';\nimport PropTypes from 'prop-types';\n\nconst ModalContextMenu = ({data}) => (\n  <div className=\"modal-menu\">\n    {data && data.map((item, key) => (\n      <Link to={item.src} key={key} className=\"modal-menu__item\">{item.title}</Link>\n    ))}\n  </div>\n);\n\nModalContextMenu.propTypes = {\n  data: PropTypes.array.isRequired\n};\n\nexport default ModalContextMenu;","import { useState } from 'react';\n\nconst useModal = () => {\n  const [isOpen, setIsOpen] = useState(false);\n\n  function handleToggleModal() {\n    setIsOpen(!isOpen);\n  }\n\n  return {\n    isOpen,\n    handleToggleModal,\n  }\n};\n\nexport default useModal;","import React, {useContext} from \"react\";\nimport PropTypes from 'prop-types';\nimport useModal from \"../../store/modules/helpers/useModal\";\nimport Modal from '../Modal/Modal';\nimport {Button} from 'reactstrap';\n\nconst ModalAsItem = ({context, isChat}) => {\n  const passedModalData = useContext(context);\n  const {isOpen, handleToggleModal} = useModal();\n  return (\n    <>\n      <Modal\n        title={passedModalData.title}\n        content={passedModalData.modalComponent}\n        isBackBtn\n        isCloseBtn\n        isOpen={isOpen}\n        handleToggleModal={handleToggleModal}\n      />\n      <Button color=\"link\" className=\"modal-menu__item is-submenu w-100\"\n              onClick={handleToggleModal}\n      >\n        {passedModalData.title} {isChat && <img src=\"assets/icons/icon-chat.svg\" alt=\"\"/>}\n      </Button>\n    </>\n  )\n};\n\nModalAsItem.propTypes = {\n  context: PropTypes.object.isRequired,\n  isChat: PropTypes.bool\n};\n\nexport default ModalAsItem;","import React, {useState} from 'react';\nimport {withRouter, Link} from 'react-router-dom';\n\nimport Chat from '../Chat/Chat';\nimport ModalContextMenu from '../ModalContextMenu';\nimport ModalAsItem from './ModalAsItem';\nimport {Form, Input, FormGroup, Button} from 'reactstrap';\n\n// Create a Context\nconst OpeningModalContext = React.createContext();\n\n// Create modal provider\nconst ModalProvider = ({item}) => (\n  <OpeningModalContext.Provider value={item}>\n    <ModalAsItem context={OpeningModalContext} isChat={item.isChat} />\n  </OpeningModalContext.Provider>\n);\n\nconst ModalMenu = ({token, categories, history}) => {\n  const [query, setQuery] = useState('');\n  \n  function onSearch(event) {\n    event.preventDefault();\n    if (!query.length) return;\n    history.push(`/search?query=${query}`);\n  }\n  \n  return (\n    <div className=\"modal-menu\">\n      {!token &&\n      <React.Fragment>\n        <Link to=\"/login\" className=\"modal-menu__item\"></Link>\n        <Link to=\"/register\" className=\"modal-menu__item\"></Link>\n      </React.Fragment>\n      }\n      {!!token &&\n      <ModalProvider item={{\n        title: \" ?\",\n        modalComponent: <Chat />,\n        isChat: true,\n      }} />\n      }\n      <div className=\"modal-menu__item d-flex\">\n        <Form inline className=\"d-flex flex-grow-1\">\n          <FormGroup style={{marginBottom: 0}} className=\"flex-grow-1 mr-2\">\n            <Input\n              type=\"text\"\n              name=\"query\"\n              value={query}\n              onChange={e => setQuery(e.target.value)}\n              placeholder=\"\" />\n          </FormGroup>\n          <Button onClick={onSearch}></Button>\n        </Form>\n      </div>\n      <h3 className=\"h6 mb-0 modal-menu__title\"></h3>\n      {categories.map(category => {\n        const item = {\n          title: category.title,\n          modalComponent: <ModalContextMenu data={category.subcategories.map(subcategory => ({\n            title: subcategory.title,\n            src: `/category/${subcategory.slug}`\n          }))} />,\n          isChat: false\n        };\n      \n        return (\n          <ModalProvider key={category.id} item={item} />\n        );\n      })}\n    </div>\n  );\n}\n\nexport default withRouter(ModalMenu);\n","import {\n  FetchCategoriesRequest, FetchCategoriesSuccess, FetchCategoriesFailure\n} from './constants';\nimport client from '../../../network';\n\nexport function fetchCategories() {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (state.categories.isLoading) return;\n    if (state.categories.items.length !== 0) return;\n    \n    dispatch({type: FetchCategoriesRequest});\n    \n    client.get('/api/categories')\n      .then(response => {\n        dispatch({type: FetchCategoriesSuccess, categories: response.data.categories});\n      }).catch(error => {\n        dispatch({type: FetchCategoriesFailure, error: error.response.data.error});\n      });\n  }\n}\n","import React, {useState, useEffect} from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport Modal from './Modal/Modal';\nimport ModalMenu from './ModalMenu/ModalMenu';\nimport { withRouter } from 'react-router';\nimport queryString from 'query-string';\nimport {fetchCategories} from '../store/modules/categories/actions';\nimport {\n  Row,\n  Col,\n  Collapse,\n  Navbar,\n  NavbarToggler,\n  Nav,\n  NavItem,\n  Form,\n  Input,\n  Button\n} from 'reactstrap';\nimport useModal from '../store/modules/helpers/useModal';\n\nfunction Header({token, categories, fetchCategories, history, location}) {\n  const values = queryString.parse(location.search);\n  const {isOpen, handleToggleModal} = useModal();\n  const [isOpenMenu, setIsOpenMenu] = useState(false);\n  const [query, setQuery] = useState(values.query || '');\n  \n  useEffect(() => {\n    if (query !== values.query) {\n      setQuery(values.query || '');\n    }\n\n    if (isOpen) handleToggleModal();\n  }, [location.search]);\n  \n  useEffect(() => {\n    if (isOpen) handleToggleModal();\n  }, [location.pathname]);\n  \n  useEffect(() => {\n    fetchCategories();\n  }, []);\n\n  function handleToggleHeaderMenu() {\n    setIsOpenMenu(!isOpenMenu);\n  }\n  \n  function search(event) {\n    event.preventDefault();\n    if (query === '') return;\n    history.push(`/search?query=${query}`);\n  }\n  \n  function logout(e) {\n    e.preventDefault();\n    localStorage.removeItem('token');\n    window.location.href = \"/\";\n  }\n\n  return (\n    <header>\n      <Navbar light expand=\"lg\">\n        <div className=\"container-xl justify-content-start\">\n          <Row className=\"flex-grow-1\">\n            <Col lg=\"3\">\n              <Modal\n                title=\"\"\n                content={<ModalMenu token={token} categories={categories} />}\n                id=\"xsMenuModal\"\n                isCloseBtn\n                isOpen={isOpen}\n                handleToggleModal={handleToggleModal}\n              />\n              <NavbarToggler onClick={handleToggleModal} className=\"d-inline-flex d-md-none\">\n                <img src=\"/assets/icons/icon-menu.svg\" alt=\"menu icon\"/>\n              </NavbarToggler>\n              <Link to=\"/\" className=\"navbar-brand\"><strong>AnyShop</strong></Link>\n            </Col>\n          \n            <Col lg=\"9\" className=\"d-none d-lg-block\">\n              <Collapse isOpen={isOpenMenu} navbar className=\"d-flex justify-content-between\">\n                <Nav navbar className=\"w-75\">\n                  <NavItem className=\"flex-grow-1\">\n                    <Form onSubmit={search} inline>\n                      <Input\n                        className=\"form-control flex-grow-1 mr-1\"\n                        type=\"text\"\n                        placeholder=\"   \"\n                        aria-label=\"Search\"\n                        value={query}\n                        onChange={event => setQuery(event.target.value)}\n                      />\n                      <Button type=\"submit\" color=\"primary\" outline></Button>\n                    </Form>\n                  </NavItem>\n                </Nav>\n                {!token &&\n                <div>\n                  <Link to=\"/login\" className=\"text-muted\"></Link>\n                  {' | '}\n                  <Link to=\"/register\" className=\"text-muted\"></Link>\n                </div>\n                }\n                {!!token &&\n                  <a onClick={logout} href=\"#\" className=\"text-muted\"></a>\n                }\n              </Collapse>\n            </Col>\n          </Row>\n        </div>\n      </Navbar>\n    </header>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return {\n    token: state.auth.token,\n    categories: state.categories.items,\n  };\n}\n\nconst mapDispatchToProps = { fetchCategories };\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Header));\n","import React from 'react';\nimport {Link} from 'react-router-dom';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <div className=\"container-xl\">\n        <div className=\"footer-inner\">\n          <div className=\"footer-menu\">\n            <Link to=\"#\" className=\"text-muted\"> </Link>\n            <span className=\"d-none d-md-inline-flex footer-menu-separator\">|</span>\n            <Link to=\"#\" className=\"text-muted\"></Link>\n            <span className=\"d-none d-md-inline-flex footer-menu-separator\">|</span>\n            <Link to=\"#\" className=\"text-muted\">Cookies</Link>\n            <span className=\"d-none d-md-inline-flex footer-menu-separator\">|</span>\n            <Link to=\"#\" className=\"text-muted\"></Link>\n          </div>\n          <div>\n             2020, learn.javascript.ru\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport { useHistory } from \"react-router-dom\";\n\nconst ListGroupMenuDropdown = ({dropdownTitle, dropdownItems}) => {\n  const history = useHistory();\n  const [isOpen, setToggleState] = useState(false);\n\n  function handleToggleDropdown() {\n      setToggleState(!isOpen);\n  }\n  \n  function onItemClick(url) {\n    return () => {\n      history.push(url);\n    }\n  }\n\n  return (\n      <Dropdown isOpen={isOpen} toggle={handleToggleDropdown}>\n          <DropdownToggle caret tag=\"a\" className=\"nav-link\">\n              { dropdownTitle }\n          </DropdownToggle>\n          <DropdownMenu>\n              { dropdownItems.map((item, key) => (\n                <DropdownItem key={key} onClick={onItemClick(`/category/${item.slug}`)}>\n                  {item.title}\n                </DropdownItem>\n              )) }\n          </DropdownMenu>\n      </Dropdown>\n  )\n};\n\nListGroupMenuDropdown.propTypes = {\n    dropdownTitle: PropTypes.string,\n    dropdownItems: PropTypes.array\n};\n\nexport default ListGroupMenuDropdown;\n","import React from 'react';\nimport { ListGroup, ListGroupItem } from 'reactstrap';\nimport ListGroupMenuDropdown from './Dropdown';\n\nconst ListGroupMenu = ({ categories }) => {\n    return (\n      <div className=\"d-none d-lg-block col-lg-3\">\n        <ListGroup className=\"sidebar\">\n            {categories.map(category => {\n                return (\n                  <ListGroupItem key={category.id}>\n                      <ListGroupMenuDropdown dropdownTitle={category.title} dropdownItems={category.subcategories} />\n                  </ListGroupItem>\n                );\n            })}\n        </ListGroup>\n      </div>\n    )\n};\n\nexport default ListGroupMenu;\n","import React, { Component } from 'react';\n\nimport {\n    Carousel,\n    CarouselItem,\n    CarouselControl,\n    CarouselIndicators\n} from 'reactstrap';\n\nimport { Link } from 'react-router-dom';\n\nconst items = [\n    {\n        id: '0',\n        slug: 'kompyutery-noutbuki-i-po',\n        src: '/assets/images/default-slide-img.jpg',\n        captionTitle: ',   ',\n        captionBtnText: ' ',\n        captionBtnIconSrc: '/assets/icons/icon-angle-white.svg'\n    },\n    {\n        id: '1',\n        slug: 'televizory-i-aksessuary',\n        src: '/assets/images/default-slide-img.jpg',\n        captionTitle: '  ',\n        captionBtnText: ' ',\n        captionBtnIconSrc: '/assets/icons/icon-angle-white.svg'\n    },\n    {\n        id: '2',\n        slug: 'smartfony-i-gadzhety',\n        src: '/assets/images/default-slide-img.jpg',\n        captionTitle: '  ',\n        captionBtnText: ' ',\n        captionBtnIconSrc: '/assets/icons/icon-angle-white.svg'\n    }\n];\n\nclass HomeCarousel extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { activeIndex: 0 };\n        this.next = this.next.bind(this);\n        this.previous = this.previous.bind(this);\n        this.goToIndex = this.goToIndex.bind(this);\n        this.onExiting = this.onExiting.bind(this);\n        this.onExited = this.onExited.bind(this);\n    }\n\n    onExiting() {\n        this.animating = true;\n    }\n\n    onExited() {\n        this.animating = false;\n    }\n\n    next() {\n        if (this.animating) return;\n        const nextIndex = this.state.activeIndex === items.length - 1 ? 0 : this.state.activeIndex + 1;\n        this.setState({ activeIndex: nextIndex });\n    }\n\n    previous() {\n        if (this.animating) return;\n        const nextIndex = this.state.activeIndex === 0 ? items.length - 1 : this.state.activeIndex - 1;\n        this.setState({ activeIndex: nextIndex });\n    }\n\n    goToIndex(newIndex) {\n        if (this.animating) return;\n        this.setState({ activeIndex: newIndex });\n    }\n\n    render() {\n        const { activeIndex } = this.state;\n        const { categories } = this.props;\n        \n        const slides = items.map((item) => {\n            const subcategory = categories.reduce((result, category) => {\n                if (result) return result;\n                const s = category.subcategories.find(({slug}) => slug === item.slug);\n                if (s) return s;\n                return result;\n            }, null);\n            \n            return (\n                <CarouselItem\n                    onExiting={this.onExiting}\n                    onExited={this.onExited}\n                    key={item.id}\n                >\n                    <img src={item.src} alt={item.captionTitle} className=\"third-slide\" />\n                    <div className=\"container\">\n                        <div className=\"carousel-caption\">\n                            <h3 className=\"h1\">{ item.captionTitle }</h3>\n                            <div>\n                                <Link className=\"btn\" to={ `/category/${subcategory.slug}` } role=\"button\">\n                                    { item.captionBtnText }\n                                    <img src={ item.captionBtnIconSrc } className=\"ml-3\" alt=\"\" />\n                                </Link>\n                            </div>\n                        </div>\n                    </div>\n                </CarouselItem>\n            );\n        });\n\n        return (\n            <Carousel\n                activeIndex={activeIndex}\n                next={this.next}\n                previous={this.previous}\n                className=\"main-carousel\"\n                \n            >\n                <CarouselIndicators items={items} activeIndex={activeIndex} onClickHandler={this.goToIndex} />\n                {slides}\n                <CarouselControl direction=\"prev\" directionText=\"Previous\" onClickHandler={this.previous} />\n                <CarouselControl direction=\"next\" directionText=\"Next\" onClickHandler={this.next} />\n            </Carousel>\n        );\n    }\n}\n\nexport default HomeCarousel;\n","export function getNounReviews(number) {\n  let n = Math.abs(number);\n  n %= 100;\n  if (n >= 5 && n <= 20) {\n    return '';\n  }\n  n %= 10;\n  if (n === 1) {\n    return '';\n  }\n  if (n >= 2 && n <= 4) {\n    return '';\n  }\n  return '';\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router-dom';\nimport {Card, CardTitle, CardText, CardImg, CardBody} from 'reactstrap';\nimport cx from 'classnames';\nimport {getNounReviews} from '../utils/getNoun';\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nconst CardComponent = ({url, cardTitle, cardImgSrc, rating, reviews, cardPrice, discount}) => (\n  <Card tag={Link} to={url}>\n    <div className=\"card-img-wrap\">\n      <CardImg width=\"100%\" className=\"card-img-top\" src={cardImgSrc} alt=\"Card image cap\"/>\n    </div>\n    <CardBody>\n      <CardTitle>{cardTitle}</CardTitle>\n      <div className=\"flex-grow\" />\n      <div className=\"rate\">\n        {new Array(5).fill('').map((el, i) => (\n          <i key={i} className={`icon-star${i < rating ? ' checked' : ''}`} />\n        ))}\n        <span className=\"rate-amount ml-2\">{reviews}</span>\n      </div>\n      <CardText className={cx(\"price-text\", {\"discount\": discount !== 0})}>\n        <strong>{formatter.format(cardPrice)}</strong>\n        {discount !== 0 && <small className=\"ml-2\">{formatter.format(cardPrice + discount)}</small>}\n      </CardText>\n    </CardBody>\n  </Card>\n);\n\nCardComponent.propTypes = {\n  cardTitle: PropTypes.string,\n  cardImgSrc: PropTypes.string,\n  cardRate: PropTypes.bool,\n  cardRateAmount: PropTypes.string,\n  cardPrice: PropTypes.string,\n  cardOldPrice: PropTypes.number,\n  discount: PropTypes.number,\n};\n\nexport default CardComponent;\n","import React from 'react';\nimport { CardDeck } from 'reactstrap';\n\nimport CardExample from './Card';\n\nfunction Recommendations({ items }) {\n  return (\n    <React.Fragment>\n      <h2 className=\"section-title text-dark\">   </h2>\n      <CardDeck className=\"homepage-cards\">\n        {items.map(item => {\n          return (\n            <CardExample\n              key={item.id}\n              url={`/product/${item.id}`}\n              cardTitle={item.title}\n              cardImgSrc={item.images[0]}\n              rating={item.rating}\n              reviews={item.reviews.length}\n              cardPrice={item.price}\n              discount={item.discount}\n            />\n          );\n        })}\n      </CardDeck>\n    </React.Fragment>\n  );\n}\n\nexport default Recommendations;\n","import React from 'react';\n\nexport default function Loader() {\n  return (\n    <div className=\"container container-loader\">\n      <div className=\"lds-default\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  );\n}\n","import {\n  FetchRecommendationsRequest, FetchRecommendationsSuccess, FetchRecommendationsFailure,\n  FetchProductsByCategoryRequest, FetchProductsByCategorySuccess, FetchProductsByCategoryFailure,\n  FetchProductsByQueryRequest, FetchProductsByQuerySuccess, FetchProductsByQueryFailure,\n  FetchProductByIdRequest, FetchProductByIdSuccess, FetchProductByIdFailure,\n} from './constants';\nimport client from '../../../network';\nimport get from 'lodash/get';\n\nexport function fetchRecommendations() {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    if (state.products.recommendations.length !== 0) return;\n    \n    dispatch({type: FetchRecommendationsRequest});\n    \n    client.get('/api/recommendations')\n      .then(response => {\n        dispatch({type: FetchRecommendationsSuccess, recommendations: response.data.recommendations});\n      }).catch(error => {\n      dispatch({type: FetchRecommendationsFailure, error: error.response.data.error});\n    });\n  }\n}\n\nexport function fetchProductsByCategory(category) {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (state.products.byCategory[category]) return;\n    \n    dispatch({type: FetchProductsByCategoryRequest, category});\n    \n    client.get('/api/products', { params: { subcategory: category } })\n      .then(response => {\n        dispatch({type: FetchProductsByCategorySuccess, category, products: response.data.products});\n      }).catch(error => {\n      dispatch({type: FetchProductsByCategoryFailure, category, error: error.response.data.error});\n    });\n  }\n}\n\nexport function fetchProductsByQuery(query) {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (get(state, `products.byQuery[${query}].fetching`) === false) return;\n    \n    dispatch({type: FetchProductsByQueryRequest, query});\n    \n    client.get('/api/products', { params: { query } })\n      .then(response => {\n        dispatch({type: FetchProductsByQuerySuccess, query, products: response.data.products});\n      }).catch(error => {\n      dispatch({type: FetchProductsByQueryFailure, query, error: error.response.data.error});\n    });\n  }\n}\n\nexport function fetchProductById(id) {\n  return (dispatch, getState) => {\n    const state = getState();\n    \n    if (get(state, `products.byId[${id}].fetching`) === false) return;\n    \n    dispatch({type: FetchProductByIdRequest, id});\n    \n    client.get(`/api/products/${id}`)\n      .then(response => {\n        dispatch({type: FetchProductByIdSuccess, id, product: response.data.product});\n      }).catch(error => {\n      dispatch({type: FetchProductByIdFailure, id, error: error.response.data.error});\n    });\n  }\n}\n","import React, { useEffect } from 'react';\nimport {connect} from 'react-redux';\n\nimport ListGroupMenu from './ListGroupMenu';\nimport HomeCarousel from './HomeCarousel';\nimport Recommendations from './Recommendations';\nimport Loader from './Loader';\n\nimport {fetchCategories} from '../store/modules/categories/actions';\nimport {fetchRecommendations} from '../store/modules/products/actions';\n\nfunction Home({ categories, recommendations, fetchCategories, fetchRecommendations }) {\n  useEffect(() => {\n    fetchCategories();\n    fetchRecommendations();\n  }, []);\n  \n  if (!categories.length || !recommendations.length) {\n    return <Loader />;\n  }\n  \n  return (\n    <React.Fragment>\n      <div className=\"container-xl\">\n        <div className=\"row flex-column-reverse flex-lg-row listgroup-menu\">\n          <div className=\"backdrop\"></div>\n          <ListGroupMenu categories={categories} />\n          <div className=\"col-lg-9\">\n            <HomeCarousel categories={categories} />\n          </div>\n        </div>\n      </div>\n      <div className=\"container-xl\">\n        <div className=\"row justify-content-end\">\n          <div className=\"col-lg-9\">\n            <Recommendations items={recommendations} />\n          </div>\n        </div>\n      </div>\n    </React.Fragment>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    categories: state.categories.items,\n    recommendations: state.products.recommendations,\n  };\n}\n\nconst mapDispatchToProps = { fetchCategories, fetchRecommendations };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { oauth } from '../store/modules/auth/actions';\n\nfunction Form(props) {\n  const [state, changeState] = useState({});\n  \n  function getOAuthLink(provider) {\n    return () => props.oauthAction({provider});\n  }\n  \n  function setValue(event) {\n    changeState({\n      ...state,\n      [event.target.name]: event.target.value\n    });\n  }\n  \n  return (\n    <div className=\"container pt-lg-5\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <h4 className=\"text-lg-center my-lg-5 my-3\">{props.title}</h4>\n          <form onSubmit={(event) => props.onSubmit(event, state)}>\n            {props.errors && !!props.errors.length && props.errors.map((error, i) => (\n              <div key={i} className=\"alert alert-danger\" role=\"alert\">\n                {error}\n              </div>\n            ))}\n            <div className=\"jumbotron jumbotron-light jumbotron-form\">\n              \n              {props.fields.map(field => {\n                return (\n                  <div className=\"form-group\" key={field.id}>\n                    <label htmlFor={field.id}>{field.label}</label>\n                    <input type={field.type} className=\"form-control\" id={field.id}\n                           placeholder={field.placeholder}\n                           name={field.name}\n                           value={state[field.name] || \"\"} onChange={setValue} required />\n                  </div>\n                );\n              })}\n  \n              <div className=\"form-group\">\n                <button disabled={props.disabled} type=\"submit\" className=\"btn btn-primary btn-lg\">\n                  {props.submitButton}\n                </button>\n              </div>\n              \n              \n              <div className=\"form-footer mt-4\">\n                <props.Footer />\n              </div>\n            </div>\n          </form>\n          <div\n            className=\"h4 text-center font-weight-normal text-uppercase my-5 d-none d-lg-block\">\n          </div>\n          <div className=\"socials mb-5\">\n            <a href=\"#\" className=\"btn btn-primary btn-social -github\" onClick={getOAuthLink('github')}>\n              <i className=\"fab fa-github\" />\n              Github\n            </a>\n            <a href=\"#\" className=\"btn btn-primary btn-social -vk\"  onClick={getOAuthLink('vkontakte')}>\n              <i className=\"fab fa-vk\" />\n              VK\n            </a>\n            <a href=\"#\" className=\"btn btn-primary btn-social -yandex\" onClick={getOAuthLink('yandex')}>\n              <i className=\"fab fa-yandex\" />\n              Yandex\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default connect(null, {\n  oauthAction: oauth\n})(Form);\n","import React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, Link } from 'react-router-dom';\nimport Form from './Form';\n\nimport { login } from '../store/modules/auth/actions';\n\nconst fields = [\n  {label: 'Email', type: 'email', id: 'email', name: 'email', placeholder: 'Email'},\n  {label: '', type: 'password', id: 'password', name: 'password', placeholder: ''},\n];\n\nfunction Login({token, login, loginAction}) {\n  if (token) return <Redirect to=\"/\" />;\n  \n  function onSubmit(event, fields) {\n    event.preventDefault();\n    if (login.processing) return;\n  \n    loginAction(fields);\n  }\n  \n  return (\n    <Form\n      disabled={login.processing}\n      title=\"\"\n      errors={login.error ? [login.error] : null}\n      onSubmit={onSubmit}\n      fields={fields}\n      submitButton=\"\"\n      Footer={() => (\n        <React.Fragment>\n           ? <Link to=\"/register\"></Link>\n        </React.Fragment>\n      )}\n    />\n  );\n}\n\nfunction mapStateToProps(state) {\n  return { login: state.auth.login, token: state.auth.token };\n}\n\nconst mapDispatchToProps = { loginAction: login };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, Link } from 'react-router-dom';\nimport { oauthCallback } from '../store/modules/auth/actions';\n\nconst providerMap = {\n  vkontakte: 'VK',\n  fb: 'Facebook',\n  github: 'Github',\n};\n\nclass OAuthCallback extends Component {\n  constructor(props) {\n    super(props);\n  \n    this.params = new URLSearchParams(props.location.search);\n    this.provider = props.match.params.provider;\n  }\n  \n  componentDidMount() {\n    if (this.params.get('error')) return;\n    this.props.oauthCallbackAction({code: this.params.get('code'), provider: this.provider});\n  }\n  \n  render() {\n    const { token, oauthCallback } = this.props;\n    \n    if (token) return <Redirect to=\"/\" />;\n    \n    return (\n      <main className=\"container\">\n        <div className=\"row login-form justify-content-center align-items-center\">\n          <div className=\"col col-md-6\">\n            <div className=\"text-center border border-light p-5\">\n              <p className=\"h4 mb-4\">  {providerMap[this.provider]}</p>\n            \n              {oauthCallback.error || this.params.get('error')\n                ? <React.Fragment>\n                  <p className=\"text-danger\">    .</p>\n                  <p className=\"text-danger\">{oauthCallback.error || \"\"}</p>\n                  <Link to=\"/\"></Link>\n                </React.Fragment>\n                : <React.Fragment>\n                  <p>, .</p>\n                  <div className=\"spinner-border\" role=\"status\">\n                    <span className=\"sr-only\">...</span>\n                  </div>\n                </React.Fragment>\n              }\n            </div>\n          </div>\n        </div>\n      </main>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return { oauthCallback: state.auth.oauthCallback, token: state.auth.token };\n}\n\nconst mapDispatchToProps = { oauthCallbackAction: oauthCallback };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OAuthCallback);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport Form from './Form';\nimport { register } from '../store/modules/auth/actions';\n\nconst fields = [\n  {label: 'Email', type: 'email', id: 'email', name: 'email', placeholder: 'Email'},\n  {label: '', type: 'text', id: 'displayName', name: 'displayName', placeholder: ''},\n  {label: '', type: 'password', id: 'password', name: 'password', placeholder: ''},\n];\n\nfunction Register({registration, registerAction}) {\n  if (registration.complete) {\n    return (\n      <div className=\"container pt-5\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-md-6\">\n          <div className=\"text-center border border-light p-5\">\n            <p className=\"h4 mb-4\">,  !</p>\n            <p>     .</p>\n            <p>  , ,      .</p>\n          </div>\n        </div>\n      </div>\n    </div>\n    );\n  }\n  \n  function onSubmit(event, fields) {\n    event.preventDefault();\n    if (registration.processing) return;\n  \n    registerAction(fields);\n  }\n  \n  return (\n    <Form\n      disabled={registration.processing}\n      title=\"\"\n      validated={registration.errors}\n      errors={registration.errors}\n      onSubmit={onSubmit}\n      fields={fields}\n      submitButton=\" \"\n      Footer={() => (\n        <p>  ?&nbsp;\n          <Link to=\"/login\"></Link>\n        </p>\n      )} />\n  );\n}\n\nfunction mapStateToProps(state) {\n  return { registration: state.auth.registration };\n}\n\nconst mapDispatchToProps = { registerAction: register };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Register);\n\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, Link } from 'react-router-dom';\nimport { confirm } from '../store/modules/auth/actions';\n\nfunction Confirm({token, confirmation, confirmAction, match}) {\n  useEffect(() => {\n    confirmAction({verificationToken: match.params.verificationToken});\n  }, []);\n  \n  if (token) return <Redirect to=\"/\" />;\n\n  return (\n    <main className=\"container\">\n      <div className=\"row login-form justify-content-center align-items-center\">\n        <div className=\"col col-md-6\">\n          <div className=\"text-center border border-light p-5\">\n            <p className=\"h4 mb-4\">  </p>\n  \n            {confirmation.error\n              ? <React.Fragment>\n                <p className=\"text-danger\">    .</p>\n                <p className=\"text-danger\">{confirmation.error}</p>\n                <Link to=\"/\"></Link>\n              </React.Fragment>\n              : <React.Fragment>\n                <p>  , , .</p>\n                <div className=\"spinner-border\" role=\"status\">\n                  <span className=\"sr-only\">...</span>\n                </div>\n              </React.Fragment>\n            }\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}\n\nfunction mapStateToProps(state) {\n  return { confirmation: state.auth.confirmation, token: state.auth.token };\n}\n\nconst mapDispatchToProps = { confirmAction: confirm };\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Confirm);\n","import React, {useState, useEffect} from 'react';\nimport {Link} from 'react-router-dom';\nimport {Collapse} from \"reactstrap\";\n\nexport default function CategoriesSideBar({categoryId = null, subcategoryId = {}, categories}) {\n  const [selectedCategoryId, selectCategoryId] = useState(categoryId);\n  \n  useEffect(() => {\n    selectCategoryId(categoryId);\n  }, [categoryId]);\n\n  return (\n    <div className=\"d-none d-lg-block col-lg-3\">\n      <div id=\"accordion\" className=\"aside-accordion-menu list-group\">\n        {categories.map((category) => {\n          return (\n            <div className=\"list-group-item\" key={category.id}>\n              <h5 className=\"mb-0\" onClick={() => selectCategoryId(category.id)}>\n                {category.title} <img src=\"/assets/icons/icon-angle.svg\" alt=\"angle-right\" />\n              </h5>\n              <Collapse isOpen={selectedCategoryId === category.id}>\n                <ul>\n                  {category.subcategories.map(subcategory => {\n                    return (\n                      <li key={subcategory.id}>\n                        <Link className={subcategoryId.id === subcategory.id ? 'active' : null} to={`/category/${subcategory.slug}`}>{subcategory.title}</Link>\n                      </li>\n                    );\n                  })}\n                </ul>\n              </Collapse>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n","import React, {useEffect, useState} from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {fetchCategories} from '../store/modules/categories/actions';\nimport {fetchProductsByCategory} from '../store/modules/products/actions';\nimport Loader from './Loader';\nimport {getNounReviews} from \"../utils/getNoun\";\nimport CategoriesSideBar from \"./CategoriesSideBar\";\nimport {CardText} from \"reactstrap\";\nimport cx from \"classnames\";\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Category({ categories, products, fetchCategories, fetchProductsByCategory, match }) {\n  useEffect(() => {\n    fetchCategories();\n    fetchProductsByCategory(match.params.category);\n  }, [match.params.category]);\n  \n  const [selectedCategoryId, selectCategoryId] = useState(null);\n  const [selectedSubcategory, setSelectedSubcategory] = useState({});\n\n  useEffect(() => {\n    for (const category of categories) {\n      const subcategory = category.subcategories.find(({slug}) => slug === match.params.category);\n      if (!subcategory) continue;\n      console.log('select category');\n      selectCategoryId(category.id);\n      setSelectedSubcategory(subcategory);\n      \n      break;\n    }\n  }, [match.params.category, categories.length]);\n\n  if (!categories.length || !products.length) {\n    return <Loader />;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row flex-column-reverse flex-lg-row\">\n        <CategoriesSideBar categories={categories} categoryId={selectedCategoryId} subcategoryId={selectedSubcategory} />\n        <div className=\"col-lg-9\">\n          <h3 className=\"h5 mt-4 mt-md-0 pt-1 mb-4\">{selectedSubcategory.title}</h3>\n          {products.map(product => {\n            return (\n              <div className=\"product-list-box\" key={product.id}>\n                <div className=\"box-inner-col description-col\">\n                  <Link to={`/product/${product.id}`} className=\"product-img\">\n                    <img src={product.images[0]} alt=\"img\" />\n                  </Link>\n                  <div className=\"product-desc\">\n                    <h4 className=\"col-title mb-2\">\n                      <Link to={`/product/${product.id}`}>{product.title}</Link>\n                    </h4>\n                    <div className=\"rate\">\n                      {new Array(5).fill('').map((el, i) => (\n                        <i key={i} className={`icon-star${i < product.rating ? ' checked' : ''}`} />\n                      ))}\n                    </div>\n                    <p className=\"rate-amount d-none d-md-block mt-1\">\n                      {` ${product.reviews.length} ${getNounReviews(product.reviews.length)}`}\n                    </p>\n                    <p className=\"price-text mb-0 mt-2 d-inline-block d-md-none\">\n                      <strong>{formatter.format(product.price)}</strong>\n                    </p>\n                  </div>\n                </div>\n                <div className=\"box-inner-col price-col\">\n                  <h4 className={cx(\"col-title price-text mb-2\", {\"discount\": product.discount !== 0})}>\n                    {formatter.format(product.price)}\n                    {product.discount !== 0 &&\n                      <small className=\"ml-2\">{formatter.format(product.price + product.discount)}</small>\n                    }\n                  </h4>\n                  <div>\n                    <Link to={`/checkout/${product.id}`} className=\"btn btn-outline-primary btn-lg\"></Link>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    categories: state.categories.items,\n    products: state.products.byCategory[props.match.params.category] || []\n  };\n}\n\nconst mapDispatchToProps = { fetchCategories, fetchProductsByCategory };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Category);\n","import React, {useEffect} from 'react';\nimport {connect} from 'react-redux';\nimport {fetchCategories} from '../store/modules/categories/actions';\nimport {fetchProductsByQuery} from '../store/modules/products/actions';\nimport Loader from './Loader';\nimport queryString from 'query-string';\nimport {Link} from \"react-router-dom\";\nimport {getNounReviews} from \"../utils/getNoun\";\nimport CategoriesSideBar from \"./CategoriesSideBar\";\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Category({ categories, products, fetchCategories, fetchProductsByQuery, location }) {\n  const values = queryString.parse(location.search);\n  \n  useEffect(() => {\n    if (values.query.length === 0) return;\n    fetchProductsByQuery(values.query);\n    fetchCategories();\n  }, [values.query]);\n  \n  if (!categories.length || !products.products || products.fetching) {\n    return <Loader />;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row flex-column-reverse flex-lg-row\">\n        <CategoriesSideBar categories={categories} />\n        <div className=\"col-lg-9\">\n          {products.products.length !== 0 &&\n            <h3 className=\"h5 mt-4 mt-md-0 pt-1 mb-4\"> </h3>\n          }\n          {products.products.length === 0 &&\n            <h3 className=\"col-title mb-2 mt-2\">{`  ${values.query}    `}</h3>\n          }\n          \n          {products.products.map(product => {\n            return (\n              <div className=\"product-list-box\" key={product.id}>\n                <div className=\"box-inner-col description-col\">\n                  <Link to={`/product/${product.id}`} className=\"product-img\">\n                    <img src={product.images[0]} alt=\"img\" />\n                  </Link>\n                  <div className=\"product-desc\">\n                    <h4 className=\"col-title mb-2\"><Link to={`/product/${product.id}`}>{product.title}</Link></h4>\n                    <div>\n                      {new Array(5).fill('').map((el, i) => (\n                        <span key={i} className={`fa fa-star${i < product.rating ? ' checked' : ''}`} />\n                      ))}\n                      <span>{` ${product.reviews.length} ${getNounReviews(product.reviews.length)}`}</span>\n                    </div>\n                    <p className=\"price-text mb-0 mt-2 d-inline-block d-md-none\">\n                      <strong>{formatter.format(product.price)}</strong>\n                    </p>\n                  </div>\n                </div>\n                <div className=\"box-inner-col price-col\">\n                  <h4 className=\"col-title price-text mb-2\">\n                    {formatter.format(product.price)}\n                  </h4>\n                  <div>\n                    <Link to={`/checkout/${product.id}`} className=\"btn btn-outline-primary btn-lg\"></Link>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state, props) {\n  const values = queryString.parse(props.location.search);\n  return {\n    categories: state.categories.items,\n    products: state.products.byQuery[values.query] || {}\n  };\n}\n\nconst mapDispatchToProps = { fetchCategories, fetchProductsByQuery };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Category);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nfunction mapToCssModules(className = '', cssModule) {\n  if (!cssModule) return className;\n  return className\n    .split(' ')\n    .map(c => cssModule[c] || c)\n    .join(' ');\n}\n\nconst CarouselIndicators = (props) => {\n  const { items, activeIndex, cssModule, onClickHandler, className } = props;\n\n  const listClasses = mapToCssModules(cx(className, 'carousel-indicators'), cssModule);\n  const indicators = items.map((item, idx) => {\n    const indicatorClasses = mapToCssModules(cx(\n      { active: activeIndex === idx }\n    ), cssModule);\n    return (\n      <li\n        key={`${item.key || Object.values(item).join('')}`}\n        onClick={(e) => {\n          e.preventDefault();\n          onClickHandler(idx);\n        }}\n        className={indicatorClasses}\n      >\n        <img src={item} alt={`indicator-img-${item.key}`} />\n      </li>);\n  });\n\n  return (\n    <ol className={listClasses}>\n      {indicators}\n    </ol>\n  );\n};\n\nCarouselIndicators.propTypes = {\n  items: PropTypes.array.isRequired,\n  activeIndex: PropTypes.number.isRequired,\n  cssModule: PropTypes.object,\n  onClickHandler: PropTypes.func.isRequired,\n  className: PropTypes.string,\n};\n\nexport default CarouselIndicators;","import React, { Component } from 'react';\n\nimport {\n  Carousel,\n  CarouselItem,\n  CarouselControl\n} from 'reactstrap';\nimport CarouselIndicators from './ProductCarouselIndicators';\n\nclass ProductCarousel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { activeIndex: 0 };\n    this.next = this.next.bind(this);\n    this.previous = this.previous.bind(this);\n    this.goToIndex = this.goToIndex.bind(this);\n    this.onExiting = this.onExiting.bind(this);\n    this.onExited = this.onExited.bind(this);\n  }\n\n  onExiting() {\n    this.animating = true;\n  }\n\n  onExited() {\n    this.animating = false;\n  }\n\n  next() {\n    if (this.animating) return;\n    const nextIndex = this.state.activeIndex === this.props.images.length - 1 ? 0 : this.state.activeIndex + 1;\n    this.setState({ activeIndex: nextIndex });\n  }\n\n  previous() {\n    if (this.animating) return;\n    const nextIndex = this.state.activeIndex === 0 ? this.props.images.length - 1 : this.state.activeIndex - 1;\n    this.setState({ activeIndex: nextIndex });\n  }\n\n  goToIndex(newIndex) {\n    if (this.animating) return;\n    this.setState({ activeIndex: newIndex });\n  }\n\n  render() {\n    const { activeIndex } = this.state;\n\n    const slides = this.props.images.map((item, key) => {\n      return (\n        <CarouselItem\n          onExiting={this.onExiting}\n          onExited={this.onExited}\n          key={key}\n        >\n          <div className=\"img-wrap\">\n            <img src={item} alt={item.altText} />\n          </div>\n        </CarouselItem>\n      );\n    });\n\n    return (\n      <Carousel\n        activeIndex={activeIndex}\n        next={this.next}\n        previous={this.previous}\n        className=\"product-carousel\"\n        images={this.props.images}\n      >\n        <CarouselIndicators items={this.props.images} activeIndex={activeIndex} onClickHandler={this.goToIndex} />\n        {slides}\n        <CarouselControl direction=\"prev\" directionText=\"Previous\" onClickHandler={this.previous} />\n        <CarouselControl direction=\"next\" directionText=\"Next\" onClickHandler={this.next} />\n      </Carousel>\n    );\n  }\n}\n\nexport default ProductCarousel;\n","import React, {useEffect, useState} from 'react';\nimport {Link} from 'react-router-dom';\nimport {connect} from 'react-redux';\nimport {fetchProductById} from '../../store/modules/products/actions';\nimport Loader from '../Loader';\nimport ProductCarousel from './ProductCarousel';\nimport {Col, Nav, NavItem, NavLink, Row, TabContent, TabPane} from \"reactstrap\";\nimport classnames from 'classnames';\nimport {getNounReviews} from \"../../utils/getNoun\";\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Product({ product, fetchProductById, match }) {\n  useEffect(() => {\n    fetchProductById(match.params.id);\n  }, [match.params.id]);\n  \n  const [activeTab, setActiveTab] = useState('description');\n  \n  function toggle(tab) {\n    if(activeTab !== tab) setActiveTab(tab);\n  }\n\n  if (product.fetching || !product.product) {\n    return <Loader />;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-lg-5\">\n          <ProductCarousel images={product.product.images} />\n        </div>\n        <div className=\"col-lg-7\">\n          <div className=\"col-lg-12 mt-6 mb-2 p-0\">\n            <h3 className=\"h5\">{product.product.title}</h3>\n            <div className=\"rate my-2\">\n              {new Array(5).fill('').map((el, i) => (\n                <i key={i} className={`icon-star${i < product.product.rating ? ' checked' : ''}`} />\n              ))}\n              <span className=\"rate-amount ml-2\">\n                {`${product.product.reviews.length} ${getNounReviews(product.product.reviews.length)}`}\n              </span>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-lg-9 py-2 product-info\">\n              {!!product.product.details[0] &&\n                <React.Fragment>\n                  <p><strong>{product.product.details[0].title}</strong></p>\n                  <ul>\n                    {product.product.details[0].items.map((detail, i) => (\n                      <li key={`details_0_${i}`}>\n                        <span>{detail.name}: {detail.value}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </React.Fragment>\n              }\n              {!!product.product.details[1] &&\n                <React.Fragment>\n                  <p><strong>{product.product.details[1].title}</strong></p>\n                  <ul>\n                    {product.product.details[1].items.map((detail, i) => (\n                      <li key={`details_1_${i}`}>\n                        <span>{detail.name}: {detail.value}</span>\n                      </li>\n                    ))}\n                  </ul>\n                </React.Fragment>\n              }\n            </div>\n            <div className=\"col-lg-3\">\n              <h4 className=\"col-title price-text mb-2 mt-0\">{formatter.format(product.product.price)}</h4>\n              <Link to={`/checkout/${product.product.id}`} className=\"btn btn-block btn-primary btn-lg\"></Link>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"row my-4\">\n        <div className=\"col-lg-7 offset-lg-5\">\n          <Nav tabs>\n            <NavItem>\n              <NavLink\n                className={classnames({ active: activeTab === 'description' })}\n                onClick={() => { toggle('description'); }}>\n                \n              </NavLink>\n            </NavItem>\n            <NavItem>\n              <NavLink\n                className={classnames({ active: activeTab === 'characteristics' })}\n                onClick={() => { toggle('characteristics'); }}>\n                \n              </NavLink>\n            </NavItem>\n            <NavItem>\n              <NavLink\n                className={classnames({ active: activeTab === 'reviews' })}\n                onClick={() => { toggle('reviews'); }}>\n                \n              </NavLink>\n            </NavItem>\n          </Nav>\n          <TabContent activeTab={activeTab}>\n            <TabPane tabId=\"description\">\n              <Row>\n                <Col sm=\"12\">\n                  <p className=\"product-info\">\n                    {product.product.description}\n                  </p>\n                </Col>\n              </Row>\n            </TabPane>\n            <TabPane tabId=\"characteristics\">\n              <Row>\n                <Col sm=\"12\">\n                  <dl className=\"row\">\n                    {product.product.details.slice(2, 5).map((detail, i) => {\n                      return (\n                        <React.Fragment key={`fragment_details_${i}`}>\n                          {detail.items.map((item, j) => (\n                            <React.Fragment key={`details_${i}_${j}`}>\n                              <dt className=\"col-sm-4\">{item.name}</dt>\n                              <dd className=\"col-sm-8\">{item.value}</dd>\n                            </React.Fragment>\n                          ))}\n                        </React.Fragment>\n                      )\n                    })}\n                  </dl>\n                </Col>\n              </Row>\n            </TabPane>\n            <TabPane tabId=\"reviews\">\n              <Row>\n                <Col sm=\"12\">\n                  <dl className=\"row\">\n                    {product.product.reviews.map((review, i) => (\n                      <React.Fragment key={i}>\n                        <dt className=\"col-sm-5\">\n                          <p>{review.author}</p>\n                          <p>\n                            {new Array(5).fill('').map((el, i) => (\n                              <span key={i} className={`fa fa-star${i < review.rating ? ' checked' : ''}`} />\n                            ))}\n                          </p>\n                        </dt>\n                        <dd className=\"col-sm-7\"><p>{review.text}</p></dd>\n                      </React.Fragment>\n                    ))}\n                  </dl>\n                </Col>\n              </Row>\n            </TabPane>\n          </TabContent>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    product: state.products.byId[props.match.params.id] || {}\n  };\n}\n\nconst mapDispatchToProps = { fetchProductById };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Product);\n","import React, {useEffect, useState} from 'react';\nimport { Alert, Form, FormGroup, Input, Label, Button } from 'reactstrap';\nimport {fetchProductById} from '../store/modules/products/actions';\nimport {checkout} from '../store/modules/orders/actions';\nimport {fetchMe} from '../store/modules/auth/actions';\nimport {connect} from 'react-redux';\nimport Loader from './Loader';\n\nconst formatter = new Intl.NumberFormat('ru-RU', { style: 'currency', currency: 'RUB' });\n\nfunction Checkout({ token, product, draft, me, fetchProductById, fetchMe, checkout, match, history }) {\n  useEffect(() => {\n    if (!token) return history.replace('/login');\n  }, [token, history]);\n  \n  useEffect(() => {\n    if (!token) return;\n    fetchMe();\n    fetchProductById(match.params.id);\n  }, [token, match.params.id]);\n  \n  const [state, setState] = useState('initial'); // 'pending'|'complete'\n  \n  const [phone, setPhone] = useState('+71111212123');\n  const [address, setAddress] = useState(' , , ');\n  \n  useEffect(() => {\n    if (draft.fetching === true) {\n      setState('pending');\n      return;\n    }\n    \n    if (!!draft.errors && state === 'pending') {\n      setState('initial');\n      return;\n    }\n    \n    if (!draft.errors && state === 'pending') {\n      setState('complete');\n    }\n  }, [draft]);\n  \n  function onSubmit(event) {\n    event.preventDefault();\n    checkout({\n      product: match.params.id,\n      phone, address,\n    });\n  }\n  \n  function backToShop(event) {\n    event.preventDefault();\n    history.replace('/');\n  }\n  \n  if (product.fetching || !product.product || me.fetching || !me.profile) {\n    return <Loader />;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-center\">\n        <div className=\"col-lg-10\">\n          <Form onSubmit={onSubmit}>\n            <h3 className=\"h5 mb-4 mt-4 text-md-center\"> </h3>\n            {!!draft.errors && Object.keys(draft.errors).map(error => (\n              <Alert color=\"warning\" key={error}>{draft.errors[error]}</Alert>\n            ))}\n            {state === 'complete' &&\n              <Alert color=\"primary\">\n                   .   email  .\n              </Alert>\n            }\n            <div className=\"product-list-box\">\n              <div className=\"box-inner-col description-col\">\n                <div className=\"product-img\">\n                  <img src={product.product.images[0]} alt=\"img\" />\n                </div>\n                <div className=\"product-desc\">\n                  <h4 className=\"col-title mb-2\">{product.product.title}</h4>\n                  <p className=\"price-text mb-0 mt-2 d-inline-block d-md-none\">\n                    <strong>{formatter.format(product.product.price)}</strong>\n                  </p>\n                </div>\n              </div>\n              <div className=\"box-inner-col price-col justify-content-center\">\n                <p className=\"mb-0 font-weight-light\">Total:</p>\n                <h4 className=\"col-title price-text mb-2\">{formatter.format(product.product.price)}</h4>\n              </div>\n            </div>\n            {state !== 'complete' &&\n              <React.Fragment>\n                <h3 className=\"h5 mb-4 mt-5 text-md-center\"> </h3>\n                <div className=\"jumbotron jumbotron-light jumbotron-form mb-0\">\n                  <div className=\"row\">\n                    <div className=\"col-md-6\">\n                      <FormGroup>\n                        <Label for=\"exampleInput\">:</Label>\n                        <Input disabled value={me.profile.displayName} type=\"text\" className=\"form-control\" id=\"exampleInput\" />\n                      </FormGroup>\n                      <FormGroup className=\"mb-4\">\n                        <Label for=\"exampleInput2\">Email:</Label>\n                        <input disabled value={me.profile.email} type=\"email\" className=\"form-control\" id=\"exampleInput2\" />\n                      </FormGroup>\n                    </div>\n                    <div className=\"col-md-6\">\n                      <FormGroup>\n                        <Label for=\"exampleInput3\">:</Label>\n                        <input value={phone} type=\"text\" className=\"form-control\" id=\"exampleInput3\"\n                               disabled={state === 'complete'}\n                               onChange={e => setPhone(e.target.value)}\n                               placeholder=\"+7 111 12 12 123\"/>\n                      </FormGroup>\n                      <FormGroup className=\"mb-4\">\n                        <Label for=\"exampleInput4\">:</Label>\n                        <Input value={address} type=\"text\" className=\"form-control\" id=\"exampleInput4\"\n                               onChange={e => setAddress(e.target.value)}\n                               disabled={state === 'complete'}\n                               placeholder=\" , , \"/>\n                      </FormGroup>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"text-center mt-2 mb-5 my-sm-5\">\n                  <Button disabled={state === 'complete'} type=\"submit\" color=\"primary\" size=\"lg\">\n                      \n                  </Button>\n                </div>\n              </React.Fragment>\n            }\n            {state === 'complete' &&\n            <div className=\"text-center mt-2 mb-5 my-sm-5\">\n              <Button onClick={backToShop} color=\"primary\" size=\"lg\">\n                  \n              </Button>\n            </div>\n            }\n          </Form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state, props) {\n  return {\n    product: state.products.byId[props.match.params.id] || {},\n    draft: state.orders.draft,\n    me: state.auth.me,\n    token: state.auth.token,\n  };\n}\n\nconst mapDispatchToProps = { fetchProductById, fetchMe, checkout };\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);\n","import {CheckoutFailure, CheckoutRequest, CheckoutSuccess} from './constants';\nimport client from '../../../network';\n\nexport function checkout(data) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const token = state.auth.token;\n  \n    dispatch({type: CheckoutRequest, data});\n    \n    client.post('/api/orders', data, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n    }).then(response => {\n      dispatch({type: CheckoutSuccess, data, order: response.data.order});\n    }).catch(error => {\n      dispatch({type: CheckoutFailure, data, errors: error.response.data.errors});\n    });\n  };\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter, Route } from 'react-router-dom';\n\nimport * as serviceWorker from './serviceWorker';\nimport store from './store';\nimport Application from './components/Application';\nimport Home from './components/Home';\nimport Login from './components/Login';\nimport OAuthCallback from './components/OAuthCallback';\nimport Register from './components/Register';\nimport Confirm from './components/Confirm';\nimport Category from './components/Category';\nimport Search from './components/Search';\nimport Product from './components/Product/Product';\nimport Checkout from './components/Checkout';\n\nReactDOM.render(\n  <Provider store={store}>\n    <BrowserRouter>\n      <Application>\n        <Route exact path=\"/\" component={Home} />\n        <Route path=\"/login\" component={Login} />\n        <Route path=\"/oauth/:provider\" component={OAuthCallback} />\n        <Route path=\"/register\" component={Register} />\n        <Route path=\"/confirm/:verificationToken\" component={Confirm} />\n        <Route path=\"/category/:category\" component={Category} />\n        <Route path=\"/search\" component={Search} />\n        <Route path=\"/product/:id\" component={Product} />\n        <Route path=\"/checkout/:id\" component={Checkout} />\n      </Application>\n    </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from 'react';\n\nimport Header from './Header';\nimport Footer from './Footer';\nimport Chat from './Chat/Chat';\n\nexport default function Application({children}) {\n  return (\n    <React.Fragment>\n      <Header />\n      <main role=\"main\">\n        {children}\n        <div className=\"d-none d-lg-block\">\n          <Chat isFixed isCollapsed />\n        </div>\n      </main>\n      <Footer />\n    </React.Fragment>\n  );\n}\n"],"sourceRoot":""}